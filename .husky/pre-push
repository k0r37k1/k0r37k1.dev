#!/bin/sh
# Pre-push hook - Run comprehensive checks before push
# This ensures CI/CD checks will pass

echo "ğŸ” Running pre-push checks..."

# 1. Run all linters (fast)
echo "\nğŸ“‹ Running linters..."
npm run lint:all || {
	echo "âŒ Linting failed! Fix errors before pushing."
	exit 1
}

# 2. Check formatting (fast)
echo "\nâœ¨ Checking code formatting..."
npm run format:check || {
	echo "âŒ Formatting check failed! Run 'npm run format' to fix."
	exit 1
}

# 3. Run unit tests (fast)
echo "\nğŸ§ª Running unit tests..."
npm test -- --run || {
	echo "âŒ Unit tests failed! Fix tests before pushing."
	exit 1
}

# 4. Build check (medium speed)
echo "\nğŸ—ï¸  Running build check..."
npm run build || {
	echo "âŒ Build failed! Fix build errors before pushing."
	exit 1
}

echo "\nâœ… All pre-push checks passed! Pushing to remote..."
