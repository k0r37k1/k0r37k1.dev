---
import BaseLayout from './BaseLayout.astro';

interface Props {
	title?: string;
	description?: string;
	ogImage?: string;
	noindex?: boolean;
}

const baseProps = Astro.props;
---

<BaseLayout {...baseProps}>
	<slot />
</BaseLayout>

<style is:global>
	/* Smooth scroll on the scrolling container (html) */
	html {
		scroll-behavior: smooth;
	}

	/* Scroll snap on desktop only - proximity mode (less aggressive) */
	@media (width >= 1024px) {
		html {
			scroll-snap-type: y proximity;
		}

		body > section {
			scroll-snap-align: start;
			scroll-snap-stop: normal;
		}
	}

	/* Full viewport sections for one-page layout */
	body > section {
		min-height: 100vh;
		display: flex;
		flex-direction: column;
		justify-content: center;
	}

	/* Override for sections that shouldn't be full height */
	body > section[data-auto-height] {
		min-height: auto;
	}
</style>

<script>
	// Smooth scroll for anchor links - enhanced with scroll-snap compatibility
	document.addEventListener('DOMContentLoaded', () => {
		const links = document.querySelectorAll('a[href^="#"]');

		links.forEach((link) => {
			link.addEventListener('click', (e) => {
				const href = link.getAttribute('href');
				if (!href || href === '#') return;

				const target = document.querySelector(href);
				if (!target) return;

				e.preventDefault();

				// Use native smooth scrolling (compatible with scroll-snap)
				target.scrollIntoView({
					behavior: 'smooth',
					block: 'start',
					inline: 'nearest',
				});
			});
		});
	});
</script>
