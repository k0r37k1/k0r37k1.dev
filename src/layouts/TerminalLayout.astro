---
import BaseLayout from '@layouts/BaseLayout.astro';
import TerminalHeader from '@components/terminal/TerminalHeader.vue';
import TerminalFooter from '@components/terminal/TerminalFooter.vue';
import GoToTop from '@components/ui/GoToTop.vue';
import CookieConsent from '@components/CookieConsent.vue';
import { getTranslations, type Language } from '@/i18n';

interface Props {
	lang?: Language;
	title: string;
	description: string;
	currentPath?: string;
	customTitle?: string;
	showGoToTop?: boolean;
}

const {
	lang = 'de',
	title,
	description,
	currentPath = '/',
	customTitle,
	showGoToTop = true,
} = Astro.props;
const t = getTranslations(lang);
---

<BaseLayout lang={lang} title={title} description={description} currentPath={currentPath}>
	<!-- Skip Links for Keyboard Navigation -->
	<a href="#main-content" class="skip-link">{t.aria.navigation.skipLinks.skipToMain}</a>

	<div class="terminal-window">
		<!-- Terminal Header -->
		<TerminalHeader client:idle lang={lang} currentPath={currentPath} customTitle={customTitle} />

		<!-- Terminal Content (Scrollable) -->
		<main id="main-content" class="terminal-content">
			<slot />

			<!-- Go to Top Button (optional) -->
			{showGoToTop && <GoToTop client:idle lang={lang} />}

			<!-- Footer -->
			<TerminalFooter client:idle lang={lang} />
		</main>
	</div>

	<!-- Cookie Consent Banner -->
	<CookieConsent client:only="vue" lang={lang} />
</BaseLayout>
