---
/**
 * Alpine.js AlertDialog Component
 *
 * Verwendet Alpine.js f체r zuverl채ssige Funktionalit채t in Astro Islands
 * VERWENDUNG: F체r AlertDialog in Astro + Vue Projekten (Reka UI as-child Pattern funktioniert nicht gut)
 */

interface Props {
	title: string;
	description: string;
	cancelText?: string;
	actionText?: string;
	variant?: 'danger' | 'primary';
}

const {
	title,
	description,
	cancelText = 'Cancel',
	actionText = 'Continue',
	variant = 'primary',
} = Astro.props;
---

<div x-data="{ open: false }">
	<!-- Trigger Button Slot -->
	<div @click="open = true">
		<slot />
	</div>

	<!-- Overlay -->
	<div
		x-show="open"
		x-transition:enter="transition ease-out duration-300"
		x-transition:enter-start="opacity-0"
		x-transition:enter-end="opacity-100"
		x-transition:leave="transition ease-in duration-200"
		x-transition:leave-start="opacity-100"
		x-transition:leave-end="opacity-0"
		@click="open = false"
		class="alert-dialog__overlay"
		style="display: none;"
		x-cloak
	>
	</div>

	<!-- Dialog Content -->
	<div
		x-show="open"
		x-transition:enter="transition ease-out duration-300"
		x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
		x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
		x-transition:leave="transition ease-in duration-200"
		x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
		x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
		class="alert-dialog__content"
		style="display: none;"
		@click.away="open = false"
		x-cloak
	>
		<h2 class="alert-dialog__title">{title}</h2>
		<p class="alert-dialog__description">{description}</p>

		<div class="alert-dialog__actions">
			<button @click="open = false" class="alert-dialog__button alert-dialog__button--cancel">
				{cancelText}
			</button>
			<button
				@click="open = false"
				class={`alert-dialog__button alert-dialog__button--action alert-dialog__button--${variant}`}
			>
				{actionText}
			</button>
		</div>
	</div>
</div>

<style>
	[x-cloak] {
		display: none !important;
	}
</style>
